<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>eLua webserver test</title>
</head><body>
<div style="text-align: center;"><big>Welcome to the <span style="font-weight: bold;">eLua</span> web server!<span style="font-weight: bold;"></span></big><br> </div>
<br>
<div style="text-align: left;">The right column of the following table is generated by embedded Lua code:<br>
<br>
<table style="text-align: left; width: 400px;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td><span style="font-weight: bold;">eLua CPU</span></td>
<td><?lua print(pd.cpu()) ?></td>
</tr>
<tr>
<td><span style="font-weight: bold;">eLua board</span></td>
<td><?lua print(pd.board()) ?></td>
</tr>
</tbody>
</table>
<br>
And now let's test CGI. Use the form below to control the on-board LED.<br><br>
<form method="get" action="http://elua/index.pht" name="led">
<table style="text-align: left; width: 400px;" border="0" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="text-align: center;" valign="undefined"><button value="ledon" name="ledon">Led ON</button></td>
<td style="text-align: center;" valign="undefined"><button value="ledoff" name="ledoff">Led OFF</button></td>
</tr>
</tbody>
</table>
</form>
<?lua
  local ledpin = pio.PF_0
  pio.output(ledpin)
  if reqdata['ledon'] == 'ledon' then
    pio.set(ledpin)
    print '<br><font color="blue"><b>The LED is now ON</b></font><br>'
  elseif reqdata['ledoff'] == 'ledoff' then
    pio.clear(ledpin)
    print '<br><font color="blue"><b>The LED is now OFF</b></font><br>'    
  elseif next(reqdata) ~= nil then
    print '<br><font color="red"><b>Invalid CGI request!</b></font><br>'    
  end
?>
<br>
Press <a href="http://elua/test.lua">here</a> to go to a test page generated completely by a Lua script.<br>
<br>
<span style="font-weight: bold;">AND MOST IMPORTANTLY ... remember to have fun with eLua :)</span><br>
</div>
</body></html>
